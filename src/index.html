<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Wii U GLSL Compiler">
    <meta name="author" content="29th-Day">
    <meta name="keywords" content="GLSL, Wii U, Shader, GX2">
    <meta name="remember" content="Love over Fear">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wii U Shader Compiler</title>

    <link rel="icon" href="favicon.svg" />
    <link rel="stylesheet" href="style.css" />

    <script src="https://unpkg.com/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6Lcs04wrAAAAAG8lKTLm8S_CN7nG3ZIS2oZ_CZV-"></script>

    <script defer>
        let editor = null;
        let data = {
            vertex: {
                model: null,
                state: null,
            },
            pixel: {
                model: null,
                state: null,
            },
            geometry: {
                model: null,
                state: null
            }
        };

        const DEFAULT_VERTEX = `#version 330 core\n\nlayout(location = 0) in vec2 aPos;\nlayout(location = 1) in vec4 aColor;\n\nout vec4 vColor;\n\nvoid main() {\n    gl_Position = vec4(aPos.x, aPos.y, 0.0f, 1.0f);\n    vColor = aColor;\n}`;
        const DEFAULT_PIXEL = `#version 330 core\n\nin vec4 vColor;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = vColor;\n}`;
        const DEFAULT_GEOMETRY = `// geometry\n`;

        // region: GLSL

        const conf = {
            comments: {
                lineComment: '//',
                blockComment: ['/*', '*/']
            },
            brackets: [
                ['{', '}'],
                ['[', ']'],
                ['(', ')']
            ],
            autoClosingPairs: [
                { open: '[', close: ']' },
                { open: '{', close: '}' },
                { open: '(', close: ')' },
                { open: "'", close: "'", notIn: ['string', 'comment'] },
                { open: '"', close: '"', notIn: ['string'] }
            ],
            surroundingPairs: [
                { open: '{', close: '}' },
                { open: '[', close: ']' },
                { open: '(', close: ')' },
                { open: '"', close: '"' },
                { open: "'", close: "'" }
            ]
        }

        const language = {
            tokenPostfix: '.glsl',
            // Set defaultToken to invalid to see what you do not tokenize yet
            defaultToken: 'invalid',
            keywords: [
                'const', 'uniform', 'break', 'continue', 'layout',
                'do', 'for', 'while', 'if', 'else', 'switch', 'case', 'in', 'out', 'inout', 'true', 'false',
                'invariant', 'discard', 'return', 'sampler2D', 'samplerCube', 'sampler3D', 'struct',
                'vec2', 'vec3', 'vec4', 'ivec2', 'ivec3', 'ivec4', 'uvec2', 'uvec3', 'uvec4', 'bvec2', 'bvec3', 'bvec4',
                'mat2', 'mat3', 'mat2x2', 'mat2x3', 'mat2x4', 'mat3x2', 'mat3x3', 'mat3x4', 'mat4x2', 'mat4x3', 'mat4x4', 'mat4',
                'float', 'int', 'uint', 'void', 'bool',
            ],
            builtin_functions: [
                'radians', 'degrees', 'sin', 'cos', 'tan', 'asin', 'acos', 'atan', 'pow', 'sinh', 'cosh', 'tanh', 'asinh', 'acosh', 'atanh',
                'exp', 'log', 'exp2', 'log2', 'sqrt', 'inversesqrt', 'abs', 'sign', 'floor', 'ceil', 'round', 'roundEven', 'trunc', 'fract', 'mod', 'modf',
                'min', 'max', 'clamp', 'mix', 'step', 'smoothstep', 'length', 'distance', 'dot', 'cross',
                'determinant', 'inverse', 'normalize', 'faceforward', 'reflect', 'refract', 'matrixCompMult', 'outerProduct', 'transpose', 'lessThan',
                'lessThanEqual', 'greaterThan', 'greaterThanEqual', 'equal', 'notEqual', 'any', 'all', 'not', 'packUnorm2x16', 'unpackUnorm2x16', 'packSnorm2x16', 'unpackSnorm2x16', 'packHalf2x16', 'unpackHalf2x16',
                'dFdx', 'dFdy', 'fwidth', 'textureSize', 'texture', 'textureProj', 'textureLod', 'textureGrad', 'texelFetch', 'texelFetchOffset',
                'textureProjLod', 'textureLodOffset', 'textureGradOffset', 'textureProjLodOffset', 'textureProjGrad', 'intBitsToFloat', 'uintBitsToFloat', 'floatBitsToInt', 'floatBitsToUint', 'isnan', 'isinf'
            ],
            operators: [
                '=',
                '>',
                '<',
                '!',
                '~',
                '?',
                ':',
                '==',
                '<=',
                '>=',
                '!=',
                '&&',
                '||',
                '++',
                '--',
                '+',
                '-',
                '*',
                '/',
                '&',
                '|',
                '^',
                '%',
                '<<',
                '>>',
                '>>>',
                '+=',
                '-=',
                '*=',
                '/=',
                '&=',
                '|=',
                '^=',
                '%=',
                '<<=',
                '>>=',
                '>>>='
            ],
            symbols: /[=><!~?:&|+\-*\/\^%]+/,
            escapes: /\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,
            integersuffix: /([uU](ll|LL|l|L)|(ll|LL|l|L)?[uU]?)/,
            floatsuffix: /[fFlL]?/,
            encoding: /u|u8|U|L/,

            builtin_vars: ['gl_Position', 'gl_FragCoord', 'gl_FragColor', 'gl_FragData',
                'gl_FrontFacing', 'gl_PointCoord', 'gl_PointSize', 'gl_VertexID',
                'gl_InstanceID', 'gl_PrimitiveID', 'gl_Layer', 'gl_ViewportIndex',
                'gl_ClipDistance', 'gl_CullDistance', 'gl_in', 'gl_out',
                'gl_InvocationID', 'gl_PatchVerticesIn', 'gl_TessLevelOuter',
                'gl_TessLevelInner', 'gl_TessCoord', 'gl_PrimitiveIDIn',
                'gl_SampleID', 'gl_SamplePosition', 'gl_SampleMaskIn', 'gl_SampleMask'],

            builtin_consts: ["gl_MaxVertexAttribs", "gl_MaxVertexUniformVectors",
                "gl_MaxVertexUniformComponents", "gl_MaxVertexOutputComponents"],

            tokenizer: {
                root: [
                    // identifiers and keywords
                    [
                        /[a-zA-Z_]\w*/,
                        {
                            cases: {
                                '@keywords': { token: 'keyword.$0' },
                                '@builtin_vars': { token: 'variable.predefined' },
                                '@builtin_consts': { token: 'variable.predefined' },
                                '@builtin_functions': { token: 'support.function' },
                                '@default': 'identifier'
                            }
                        }
                    ],

                    // Preprocessor directive (#define)
                    [/^\s*#\s*\w+/, 'keyword.directive'],

                    // whitespace
                    { include: '@whitespace' },

                    // delimiters and operators
                    [/[{}()\[\]]/, '@brackets'],
                    [/@symbols/, {
                        cases: {
                            '@operators': 'operator',
                            '@default': ''
                        }
                    }],

                    // numbers
                    [/\d*\d+[eE]([\-+]?\d+)?(@floatsuffix)/, 'number.float'],
                    [/\d*\.\d+([eE][\-+]?\d+)?(@floatsuffix)/, 'number.float'],
                    [/0[xX][0-9a-fA-F']*[0-9a-fA-F](@integersuffix)/, 'number.hex'],
                    [/0[0-7']*[0-7](@integersuffix)/, 'number.octal'],
                    [/0[bB][0-1']*[0-1](@integersuffix)/, 'number.binary'],
                    [/\d[\d']*\d(@integersuffix)/, 'number'],
                    [/\d(@integersuffix)/, 'number'],

                    // delimiter: after number because of .\d floats
                    [/[;,.]/, 'delimiter']
                ],

                comment: [
                    [/[^\/*]+/, 'comment'],
                    [/\/\*/, 'comment', '@push'],
                    ['\\*/', 'comment', '@pop'],
                    [/[\/*]/, 'comment']
                ],

                // Does it have strings?
                string: [
                    [/[^\\"]+/, 'string'],
                    [/@escapes/, 'string.escape'],
                    [/\\./, 'string.escape.invalid'],
                    [/"/, {
                        token: 'string.quote',
                        bracket: '@close',
                        next: '@pop'
                    }]
                ],

                whitespace: [
                    [/[ \t\r\n]+/, 'white'],
                    [/\/\*/, 'comment', '@comment'],
                    [/\/\/.*$/, 'comment']
                ]
            }
        }

        // endregion

        require.config({
            paths: {
                vs: 'https://unpkg.com/monaco-editor@0.45.0/min/vs',
            }
        });

        require(['vs/editor/editor.main'], function () {

            if (!monaco.languages.getLanguages().find(lang => lang.id === 'glsl')) {
                monaco.languages.register({ id: 'glsl' });

                monaco.languages.setMonarchTokensProvider('glsl', language);

                monaco.languages.setLanguageConfiguration('glsl', conf);
            }

            function getInitialTheme() {
                const theme = document.documentElement.getAttribute('data-theme');

                // Handle default theme - check system preference
                if (!theme || theme === 'default') {
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    return prefersDark ? 'vs-dark' : 'vs';
                }

                return (theme === 'dark') ? 'vs-dark' : 'vs';
            }

            data.vertex.model = monaco.editor.createModel(DEFAULT_VERTEX, "glsl");
            data.pixel.model = monaco.editor.createModel(DEFAULT_PIXEL, "glsl");
            data.geometry.model = monaco.editor.createModel(DEFAULT_GEOMETRY, "glsl");

            editor = monaco.editor.create(document.getElementById('editor'), {
                model: data.vertex.model,
                theme: getInitialTheme(),
                automaticLayout: true,
                minimap: { enabled: false },
                fontSize: 14,
                tabSize: 4,
                insertSpaces: true,
                wordWrap: 'on'
            });


            function updateEditorTheme() {
                if (!editor) return;

                // Get theme from multiple sources
                const dataTheme = document.documentElement.getAttribute('data-theme');
                const themeController = document.querySelector('input[name="theme-dropdown"]:checked');
                const selectedTheme = themeController ? themeController.value : dataTheme;

                // Determine Monaco theme based on selected theme
                let monacoTheme = 'vs'; // default to light

                if (selectedTheme === 'dark' || dataTheme === 'dark') {
                    monacoTheme = 'vs-dark';
                } else if (selectedTheme === 'light' || dataTheme === 'light') {
                    monacoTheme = 'vs';
                } else if (selectedTheme === 'default' || !selectedTheme) {
                    // For default theme, check system preference
                    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    monacoTheme = prefersDark ? 'vs-dark' : 'vs';
                }

                editor.updateOptions({ theme: monacoTheme });
            }


            document.addEventListener('change', function (e) {
                switch (e.target.name) {
                    case 'theme-dropdown':
                        updateEditorTheme();
                        break;
                    case 'editor-tab':
                        updateEditorTab(e.target.value);
                        break;
                    case 'geometry-toggle':
                        applyGeometryToggle(e.target.checked);
                        break;
                }
            });

            window.addEventListener('load', () => {
                const params = new URLSearchParams(window.location.search);
                if (params.has('vertex')) {
                    data.vertex.model.setValue(decodeURIComponent(params.get('vertex')));
                }
                if (params.has('pixel')) {
                    data.pixel.model.setValue(decodeURIComponent(params.get('pixel')));
                }
                if (params.has('geometry')) {
                    data.geometry.model.setValue(decodeURIComponent(params.get('geometry')));
                    applyGeometryToggle(true);
                } else {
                    applyGeometryToggle(false);
                }
            });
        });

        function getShaderCode() {
            return {
                vertex: data.vertex.model.getValue(),
                pixel: data.pixel.model.getValue(),
                ...(!document.querySelector("#geometry-tab").disabled) && { geometry: data.geometry.model.getValue() }
            };
        }

        function applyGeometryToggle(show) {
            const e = document.querySelector("#geometry-tab");

            e.disabled = !show;
            if (e.checked) {
                document.querySelector('#vertex-tab').checked = true;
                updateEditorTab('vertex');
            }
        }

        function updateEditorTab(tab) {
            let state = editor.saveViewState();
            let model = editor.getModel();

            switch (model) {
                case data.vertex.model:
                    data.vertex.state = state;
                    break;
                case data.pixel.model:
                    data.pixel.state = state;
                    break;
                case data.geometry.model:
                    data.geometry.state = state;
                    break;
            }

            editor.setModel(data[tab].model);
            editor.restoreViewState(data[tab].state);
            editor.focus();
        }

        function shareCode() {
            let content = getShaderCode();
            history.pushState(content, "unused", "?vertex=" + encodeURIComponent(content.vertex) +
                "&pixel=" + encodeURIComponent(content.pixel) +
                (content.geometry ? "&geometry=" + encodeURIComponent(content.geometry) : ""));

            navigator.clipboard.writeText(window.location);
        }

        function compileRequest(button) {
            grecaptcha.ready(function () {
                grecaptcha.execute('6Lcs04wrAAAAAG8lKTLm8S_CN7nG3ZIS2oZ_CZV-', { action: 'submit' }).then(async function (token) {
                    const download = document.querySelector("#download");
                    const title = document.querySelector("#error-title");
                    const error = document.querySelector("#error");

                    button.disabled = true;

                    try {
                        let res = await fetch(atob("aHR0cHM6Ly9nbHNsLWNvbXBpbGVyLWJhY2tlbmQtOTU1MjI4NjE1OTAwLmV1cm9wZS13ZXN0MS5ydW4uYXBwL2dsc2w="), {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify(getShaderCode())
                        });

                        if (res.ok) {
                            download.href = URL.createObjectURL(await res.blob());

                            title.innerHTML = "Error";
                            error.innerHTML = "";
                        } else {
                            let detail = (await res.json()).detail;

                            title.innerHTML = detail.error;
                            error.innerHTML = detail.message;
                        }
                    } catch (e) {
                        title.innerHTML = "Error";
                        error.innerHTML = e.message;
                    }

                    button.disabled = false;
                });
            });
        }
    </script>
</head>

<body>
    <nav class="navbar bg-primary shadow-sm px-8 ">
        <div class="flex-1 text-xl font-bold text-primary-content">
            Wii U Shader Compiler
        </div>
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li>
                    <div class="tooltip tooltip-bottom p-0" data-tip="Copy to clipboard">
                        <button class="btn btn-ghost text-primary-content" onclick="shareCode();">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="size-[1.2em]"
                                fill="currentColor">
                                <path
                                    d="M307 34.8c-11.5 5.1-19 16.6-19 29.2l0 64-112 0C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96l96 0 0 64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z" />
                            </svg>
                            Share
                        </button>
                    </div>

                </li>
                <li>
                    <a class="btn btn-ghost  text-primary-content" href="https://github.com/rust-wiiu" target="_blank">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="size-[1.2em]"
                            fill="currentColor">
                            <path
                                d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
                        </svg>
                        GitHub
                    </a>

                </li>
                <div class="dropdown dropdown-end">
                    <div tabindex="0" role="button" class="btn btn-ghost  text-primary-content">
                        Theme
                        <svg width="12px" height="12px" class="inline-block h-2 w-2 fill-current opacity-60"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048">
                            <path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path>
                        </svg>
                    </div>
                    <ul tabindex="0" class="dropdown-content bg-base-300 rounded-box z-1 w-30 p-2 shadow-2xl">
                        <li>
                            <input type="radio" name="theme-dropdown"
                                class="theme-controller w-full btn btn-sm btn-ghost justify-start" aria-label="Default"
                                checked value="default" />
                        </li>
                        <li>
                            <input type="radio" name="theme-dropdown"
                                class="theme-controller w-full btn btn-sm btn-ghost justify-start" aria-label="Light"
                                value="light" />
                        </li>
                        <li>
                            <input type="radio" name="theme-dropdown"
                                class="theme-controller w-full btn btn-sm btn-ghost justify-start" aria-label="Dark"
                                value="dark" />
                        </li>
                    </ul>
                </div>
            </ul>
        </div>
    </nav>

    <main class="p-8 [&>div]:mb-8">

        <div class="border border-base-500 rounded-lg overflow-hidden">

            <div class="border-b border-base-500 flex justify-between items-center pr-4">

                <div class="radio-tabs overflow-hidden">
                    <input type="radio" id="vertex-tab" name="editor-tab" value="vertex" checked>
                    <label for="vertex-tab">Vertex</label>

                    <input type="radio" id="pixel-tab" name="editor-tab" value="pixel">
                    <label for="pixel-tab">Pixel</label>

                    <input type="radio" id="geometry-tab" name="editor-tab" value="geometry" disabled>
                    <label for="geometry-tab">Geometry</label>
                </div>

                <div class="tooltip tooltip-left" data-tip="Toggle geometry shader">
                    <label class="toggle text-base-content">
                        <input type="checkbox" name="geometry-toggle" />
                        <svg aria-label="disabled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg>
                        <svg aria-label="enabled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <g stroke-linejoin="round" stroke-linecap="round" stroke-width="4" fill="none"
                                stroke="currentColor">
                                <path d="M20 6 9 17l-5-5"></path>
                            </g>
                        </svg>
                    </label>
                </div>
            </div>

            <div id="editor" class="w-full h-[60vh]"></div>
        </div>

        <div class="collapse collapse-arrow has-[pre:empty]:hidden">
            <input type="checkbox" />
            <div id="error-title" class="collapse-title font-semibold bg-error">Error</div>
            <div class="collapse-content text-sm  border-base-500 border rounded-b-xl p-0 m-0">
                <pre id="error" class="whitespace-pre-wrap max-w-[90vw] mx-auto overflow-hidden px-4 pt-4"></pre>
            </div>
        </div>

        <div class="flex align-middle justify-center gap-x-4">

            <button class="btn group btn-primary" onclick="compileRequest(this);">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="size-5 mr-1 group-disabled:hidden"
                    fill="currentColor">
                    <path
                        d="M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z" />
                </svg>
                <span class="loading loading-spinner group-not-disabled:hidden"></span>
                Compile
            </button>



            <a id="download" class="btn btn-primary [&[href='#']]:hidden" href="#" download="shader.gsh">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="size-5 mr-1" fill="currentColor">
                    <path
                        d="M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM216 232l0 102.1 31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31L168 232c0-13.3 10.7-24 24-24s24 10.7 24 24z" />
                </svg>
                Download
            </a>
        </div>

        <div>
            <div class="collapse collapse-arrow bg-base-100 border-b border-base-300">
                <input type="radio" name="my-accordion-2" checked="checked" />
                <div class="collapse-title font-semibold">How do I compile shaders?</div>
                <div class="collapse-content text-sm">
                    To compile shaders, paste your shader code into the appropriate editor tabs and click the "Compile"
                    button. If compilation succeeds, click the "Download" button to save the GSH shader file to your
                    system. You can then include it in your Wii U homebrew code.
                </div>
            </div>
            <div class="collapse collapse-arrow bg-base-100 border-b border-base-300">
                <input type="radio" name="my-accordion-2" />
                <div class="collapse-title font-semibold">What are shaders?</div>
                <div class="collapse-content text-sm">
                    Shaders are specialized programs designed to run on a GPU. Unlike traditional CPU programs that
                    execute instructions sequentially one at a time, shaders are inherently parallel and can process
                    thousands of operations simultaneously across multiple cores. This parallel architecture requires
                    fundamentally different programming paradigms and optimization strategies compared to typical CPU
                    programs.
                    <br />
                    <br />
                    Shaders are the core technology responsible for calculating and rendering the actual visuals that
                    users see on their displays. They handle everything from transforming 3D vertex positions into
                    screen coordinates, to calculating complex lighting effects, applying textures, and determining the
                    final color of each pixel. Modern graphics rely entirely on shaders for rendering everything from
                    simple 2D interfaces to complex 3D scenes with realistic lighting, shadows, and material properties.
                </div>
            </div>
            <div class="collapse collapse-arrow bg-base-100 border-b border-base-300">
                <input type="radio" name="my-accordion-2" />
                <div class="collapse-title font-semibold">How do I write shaders?</div>
                <div class="collapse-content text-sm">
                    Shaders are written in specialized programming languages. A fairly common
                    graphics driver is OpenGL which, among others, can be programed using the <a
                        href="https://www.khronos.org/opengl/wiki/Core_Language_(GLSL)" target="_blank"
                        class="link link-accent">GLSL</a>
                    language. The Wii U has a custom graphics driver named GX2, but fortunately it is
                    quite similar to OpenGL and can be
                    programmed with GLSL.
                    <br />
                    <br />
                    If you are unfamiliar with GLSL, I recommend starting by learning OpenGL and GLSL, then
                    applying those concepts to Wii U development. There are many resources available online, including
                    <a href="https://learnopengl.com/" target="_blank" class="link link-accent">Learn OpenGL</a>.
                </div>
            </div>
            <div class="collapse collapse-arrow bg-base-100 border-b border-base-300">
                <input type="radio" name="my-accordion-2" />
                <div class="collapse-title font-semibold">The compilation fails?!</div>
                <div class="collapse-content text-sm">
                    Compiler error messages can be complex and difficult to understand. Please do NOT create GitHub
                    issues for compilation errors. For help with GLSL code, consult the official GLSL documentation, ask
                    knowledgeable developers, or try using AI language models for assistance. Only create issues if you
                    encounter repeated server errors or if you're certain that valid code is being incorrectly rejected.
                </div>
            </div>
            <div class="collapse collapse-arrow bg-base-100 border-b border-base-300">
                <input type="radio" name="my-accordion-2" />
                <div class="collapse-title font-semibold">Where can I find more information?</div>
                <div class="collapse-content text-sm">
                    You can find more information on our GitHub organization by clicking the
                    GitHub icon or <a class="link link-accent" href="https://github.com/rust-wiiu"
                        target="_blank">here</a>.
                </div>
            </div>
        </div>
    </main>

    <footer class="footer sm:footer-horizontal footer-center bg-neutral text-neutral-content p-4">
        <aside>
            <p>© 2025 | Made with ❤️ by rust-wiiu</p>
        </aside>
    </footer>
</body>

<!-- https://daisyui.com/components/ -->
<!-- https://fontawesome.com/search -->
<!-- https://stackoverflow.com/questions/53900950/tabs-in-monaco-editor -->

</html>
